-- Tabla de clientes
CREATE TABLE cliente (
    id_cliente INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    cedula VARCHAR(20) NOT NULL,
    telefono VARCHAR(20),
    correo VARCHAR(150),
    observaciones TEXT,
    encargado VARCHAR(100),
    dispositivo VARCHAR(50)
);

-- Tabla de formularios de reparación
CREATE TABLE formulario_reparacion (
    id_formulario INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT,
    diagnostico TEXT,
    precio_estimado DECIMAL(10,2),
    status VARCHAR(50),
    fecha_ingreso DATE,
    tecnico_asignado VARCHAR(100),
    FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente)
);

-- Tabla de historial de clientes
CREATE TABLE historial_cliente (
    id_historial INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT,
    id_formulario INT,
    modelo VARCHAR(100),
    precio_final DECIMAL(10,2),
    status VARCHAR(50),
    FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente),
    FOREIGN KEY (id_formulario) REFERENCES formulario_reparacion(id_formulario)
);

-- Datos de prueba
INSERT INTO cliente (nombre, cedula, telefono, correo, observaciones, encargado, dispositivo) VALUES
('Cristian', '111111111', '88888888', 'cristian@mail.com', 'Cliente frecuente', 'Juan Pérez', 'Celular'),
('Mariana', '222222222', '70001111', 'mariana@gmail.com', 'Viene por segunda vez', 'María Rodríguez', 'Tablet'),
('Kevin', '333333333', '60000000', 'kevin@hotmail.com', 'Revisión pendiente', 'Pablo Ramírez', 'Computadora');

INSERT INTO formulario_reparacion (id_cliente, diagnostico, precio_estimado, status, fecha_ingreso, tecnico_asignado) VALUES
(1, 'Pantalla rota', 25000, 'Pendiente', '2024-11-05', 'Juan Pérez'),
(2, 'Problema de batería', 18000, 'En proceso', '2024-11-10', 'Ana Morales'),
(3, 'No enciende el dispositivo', 0, 'Diagnóstico', '2024-11-12', 'Pablo Ramírez');

INSERT INTO historial_cliente (id_cliente, id_formulario, modelo, precio_final, status) VALUES
(1, 1, 'Samsung S24', 238904, 'En Proceso');
